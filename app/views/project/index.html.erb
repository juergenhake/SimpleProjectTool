<%= render partial: '/shared/flash_message'%>
<%= render partial: '/project/modal/newProject' %>
<div class="page-header">
  <h1>Alle Projekte</h1>
</div>
<div class="row">
  <div class="col-md-12", align="right">
    <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#newProject">
      Neues Projekt
    </button>
    <br>
  </div>
</div>
<br>
<div class="row">
    <div class="col-md-12">
      <table class="table table-hover">
        <tr>
          <th>#</th>
          <th>Titel</th>
          <th>Bezeichnung</th>
          <th>Bauteil / Kunde</th>
          <th>Typ</th>
          <th colspan="2">Projektleiter</th>
        </tr>
        <% @projects.each do |project| %>
            <tr>
              <td><%=project.id%></td>
              <td><%=project.title%></td>
              <td><%=project.description%></td>
              <% if project.customer.present? %>
                <td>K<%=project.customer.id%></td>
              <% elsif project.component.present? %>
                <td>B<%=project.component.id%></td>
              <% else %>
                <td>ohne Zuordnung</td>
              <% end %>
              <td><%=project.Sonstige?%></td>
              <% if project.user.present? %>
                <td><%=project.user.first_name%> <%=project.user.last_name%></td>
              <% else %>
                <td>Kein Projektleiter definiert</td>
              <% end %>
              <td>
                <%= link_to project_path(project), 'data-toggle'=> "tooltip", 'data-placement' => "bottom", title: "Projekt öffnen" do %>
                  <span class="glyphicon glyphicon-folder-open" aria-hidden="true"></span>
                  <%= link_to edit_project_path(project, customer: @customer), 'data-toggle'=> "tooltip", 'data-placement' => "bottom", title: "Projekt ändern" do %>
                  <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                <%end%>
                <%= link_to project_path(project, customer: @customer), method: :delete, 'data-toggle'=> "tooltip", 'data-placement' => "bottom", title: "Projekt löschen" do %>
                  <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                <%end%>
                <%end%>
              </td>
            </tr>
        <%end%>
      </table>
    </div>
</div>